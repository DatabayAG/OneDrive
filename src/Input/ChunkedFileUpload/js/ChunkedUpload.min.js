initChunkedUpload=(a,b,c,d,e,f,g)=>{const h=document.getElementById(a);$("#form_"+b).on("submit",b=>{b.preventDefault(),il.waiter.show();let f=h.files[0];this.file_in_progress=f,$.ajax({type:"post",url:c,data:{filename:f.name}}).success(b=>{b=JSON.parse(b);let c=$("#"+a);c.on("fileuploaddone",()=>{il.waiter.hide(),this.file_in_progress=void 0,"undefined"!=typeof e&&executeFunctionByName(e,window,f)}).on("fileuploadprogress",(a,b)=>{il.waiter.setBytes(b.loaded,b.total)}).on("fileuploadfail",(a,b)=>{$.ajax({type:"post",url:g,data:{filename:f.name,message:a.errorThrown}}),il.waiter.hide(),this.file_in_progress=void 0,alert("Error: "+b.errorThrown)}),c.fileupload(),c.fileupload("send",{files:f,url:b.uploadUrl,type:"PUT",maxChunkSize:Math.min(d,f.size-1),multipart:!1})}).fail(a=>{il.waiter.hide();const b=JSON.parse(a.responseText);alert(b.error.message+"<br>Please contact an administrator.")})}),$(window).bind("beforeunload",()=>"undefined"==typeof this.file_in_progress?void 0:"Upload in progress. Are you sure you want to leave?"),$(window).bind("unload",()=>{"undefined"!=typeof this.file_in_progress&&$.ajax({type:"post",url:f,data:{filename:this.file_in_progress.name}})})};function executeFunctionByName(a,b){for(var c=Array.prototype.slice.call(arguments,2),d=a.split("."),e=d.pop(),f=0;f<d.length;f++)b=b[d[f]];return b[e].apply(b,c)}