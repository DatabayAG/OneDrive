initChunkedUpload=(a,b,c,d,e,f,g,h)=>{let i=$("input[name=\"cmd["+h+"]\"]");i.prop("disabled",!0);let j=$("#"+a),k=$("#"+a+"_filename");j.on("change",()=>{let a=j.get(0).files[0];k.val(a?a.name:""),i.prop("disabled",!a)}),$("#form_"+b).on("submit",a=>{let b=j.get(0).files[0];a.preventDefault(),il.waiter.show(),this.file_in_progress=b,j.fileupload(),$.ajax({type:"post",url:c,data:{filename:b.name}}).success(a=>{a=JSON.parse(a),j.on("fileuploaddone",()=>{il.waiter.hide(),this.file_in_progress=void 0,"undefined"!=typeof e&&executeFunctionByName(e,window,b)}).on("fileuploadprogress",(a,b)=>{il.waiter.setBytes(b.loaded,b.total)}).on("fileuploadfail",(a,c)=>{$.ajax({type:"post",url:g,data:{filename:b.name,message:a.errorThrown}}),il.waiter.hide(),this.file_in_progress=void 0,alert("Error: "+c.errorThrown)}),j.fileupload("send",{files:b,url:a.uploadUrl,type:"PUT",maxChunkSize:Math.min(d,b.size-1),multipart:!1})}).fail(a=>{il.waiter.hide();const b=JSON.parse(a.responseText);alert(b.error.message+"<br>Please contact an administrator.")})}),$(window).bind("beforeunload",()=>"undefined"==typeof this.file_in_progress?void 0:"Upload in progress. Are you sure you want to leave?"),$(window).bind("unload",()=>{"undefined"!=typeof this.file_in_progress&&$.ajax({type:"post",url:f,data:{filename:this.file_in_progress.name}})})};function executeFunctionByName(a,b){for(var c=Array.prototype.slice.call(arguments,2),d=a.split("."),e=d.pop(),f=0;f<d.length;f++)b=b[d[f]];return b[e].apply(b,c)}