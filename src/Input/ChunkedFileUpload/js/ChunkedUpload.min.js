initChunkedUpload=(a,b,c,d,e,f,g,h,i)=>{let j=$("input[name=\"cmd["+i+"]\"]");j.prop("disabled",!!i);let k=$("#"+a),l=$("#"+a+"_filename");k.on("change",()=>{let a=k.get(0).files[0];l.val(a?a.name:""),j.prop("disabled",!a&&!!i)}),j.on("click",a=>{let b=k.get(0).files[0];a.preventDefault(),il.waiter.show(),this.file_in_progress=b,k.fileupload(),$.ajax({type:"post",url:c,data:{filename:b.name}}).success(a=>{a=JSON.parse(a),k.on("fileuploaddone",()=>{clearInterval(this.session_refresher),il.waiter.hide(),this.file_in_progress=void 0,"undefined"!=typeof e&&executeFunctionByName(e,window,b)}).on("fileuploadprogress",(a,b)=>{il.waiter.setBytes(b.loaded,b.total)}).on("fileuploadfail",(a,c)=>{clearInterval(this.session_refresher),$.ajax({type:"post",url:g,data:{filename:b.name,message:a.errorThrown}}),il.waiter.hide(),this.file_in_progress=void 0,alert("Error: "+c.errorThrown)}),this.session_refresher=setInterval(()=>{$.get(h)},3e5),k.fileupload("send",{files:b,url:a.uploadUrl,type:"PUT",maxChunkSize:Math.min(d,b.size-1),multipart:!1})}).fail(a=>{clearInterval(this.session_refresher),il.waiter.hide();const b=JSON.parse(a.responseText);alert(b.error.message+"<br>Please contact an administrator.")})}),$(window).bind("beforeunload",()=>"undefined"==typeof this.file_in_progress?void 0:"Upload in progress. Are you sure you want to leave?"),$(window).bind("unload",()=>{"undefined"!=typeof this.file_in_progress&&$.ajax({type:"post",url:f,data:{filename:this.file_in_progress.name}})})};function executeFunctionByName(a,b){for(var c=Array.prototype.slice.call(arguments,2),d=a.split("."),e=d.pop(),f=0;f<d.length;f++)b=b[d[f]];return b[e].apply(b,c)}